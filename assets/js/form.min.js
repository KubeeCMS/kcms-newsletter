jQuery(document).ready(function(o){"use strict";o("body").on("submit.mailster","form.mailster-ajax-form",function(e){e.preventDefault();var s=o(this),r=s.serialize(),i=o('<div class="mailster-form-info"></div>'),a;if("function"===typeof window.mailster_pre_submit){a=window.mailster_pre_submit.call(this,r);if(a===false)return false;if(typeof a!=="undefined")r=a}s.addClass("loading").find(".submit-button").prop("disabled",true);o.post(s.attr("action"),r,t,"JSON").fail(function(s,e,r){var i;try{i=JSON.parse(s.responseText);if(!i.data.html){i={html:"There was an error with the response:<br><code>["+i.data.code+"] "+i.data.message+"</code>",success:false}}}catch(e){i={html:"There was an error while parsing the response:<br><code>"+s.responseText+"</code>",success:false}}t(i);if(console)console.error(s.responseText)});function t(e){s.removeClass("loading has-errors").find("div.mailster-wrapper").removeClass("error");s.find(".mailster-form-info").remove();if("function"===typeof window.mailster_post_submit){a=window.mailster_post_submit.call(s[0],e);if(a===false)return false;if(typeof a!=="undefined")e=a}s.find(".submit-button").prop("disabled",false);if(e.data.html)i.html(e.data.html);if(o(document).scrollTop()<s.offset().top){i.prependTo(s)}else{i.appendTo(s)}if(e.success){if(!s.is(".is-profile"))s.find(".mailster-form-fields").slideUp(100).find(".mailster-wrapper").find(":input").prop("disabled",true).filter(".input").val("");e.data.redirect?location.href=e.data.redirect:i.show().addClass("success")}else{if(e.data.fields)o.each(e.data.fields,function(e){s.addClass("has-errors").find(".mailster-"+e+"-wrapper").addClass("error")});i.show().addClass("error")}}})});